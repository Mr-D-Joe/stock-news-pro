# SYSTEM REPORT — Stock News Pro
# =============================

⚠️ NON-NORMATIVE / DESCRIPTIVE DOCUMENT

This document is a **System Report**.

It is:

- DESCRIPTIVE
- NON-NORMATIVE
- NON-AUTHORITATIVE
- REGENERATABLE

It MUST NOT define rules, architecture, or constraints.

---

## DOCUMENT ORIGIN

This document is generated by an LLM (Gemini) based on:

- Current codebase observation
- Runtime behavior
- DESIGN.md constitution

It represents an **observed system state**, not an intended design.

---

## DOCUMENT PURPOSE

The System Report exists to:

- Describe the current technical state of the system.
- Enable audits against DESIGN.md.
- Provide traceability between constitution and implementation.
- Serve as an audit artifact for humans, LLMs, and automated systems.

This document enables:

| Audience | Purpose |
|--------|---------|
| LLM | Knows how System Reports must be generated |
| Test System | Validates report structure and compliance |
| Auditor | Distinguishes normative vs descriptive content |
| Human | Understands real system state |
| Governance | Prevents rule dilution |

---

## GOVERNANCE RELATION

Binding Authority:  
→ DESIGN.md ONLY

This document:

- MUST NOT override DESIGN.md  
- MUST NOT reinterpret DESIGN.md  
- MUST NOT introduce new rules  
- MUST NOT resolve deviations implicitly  
- Any deviation from DESIGN.md MUST be explicitly marked as:

> **Deviation from DESIGN.md**

---

## DOCUMENT STATUS

- Snapshot in time  
- Not authoritative  
- Safe to discard and regenerate  
- Cannot be used as design source  

---

## DATE

2026-01-21

---

## REPORT TYPE

Technical Architecture Review

---

## SCOPE

Frontend (React / Tauri) & Mock Services

---

# 1. Executive Summary

Stock News Pro is a desktop-native financial analytics dashboard designed to assist investors in analyzing:

- Stock market data  
- Sector news  
- AI-generated reports and essays  
- Long-term price trends  

The system prioritizes:

- UI stability and professional layout  
- Architectural separation (Frontend vs Services)  
- STRICT usage of Mock Data (no real backend connection)  
- Type-safe implementation (TypeScript)  

Maturity: **High-Fidelity Prototype**.  
The system allows full user interaction, navigation, and data visualization but operates entirely on a strictly isolated Mock Service Layer.

**Post-Cleanup Status:**
Legacy components (JavaFX GUI, C++ Engine, Protobufs) have been removed from the active project structure and archived in `/Trash/`.

---

# 2. System Architecture

## Observed Architecture Style

Component-Based Monolithic SPA (Single Page Application).

## Observed Separation of Concerns

| Layer | Observation |
|------|------------|
| UI | React Components (Function Components) |
| State | Global Context (`AppContext`) |
| Data | Isolated Service Layer (`MockApiService`) |
| Desktop | Tauri shell (Passive host) |
| Persistence | Runtime Memory Cache (`Map` in Context) |

## Observed Technology Stack

- **Framework**: React 19
- **Language**: TypeScript ~5.9
- **Build**: Vite 7.3
- **Styling**: TailwindCSS 3.4 (Utility-first)
- **UI Lib**: ShadCN/UI compatibility
- **Charts**: Recharts 3.6
- **Host**: Tauri v2

## Observed Boundaries

- **Backend**: Fully mocked via `MockApiService.ts`. No network calls observed.
- **AI**: Static template generation with variable injection. No LLM calls observed.
- **Legacy**: Removed. `engine/`, `shared/`, JavaFX `gui/` are archived in `/Trash/`.

---

# 3. Module Overview

## Frontend Core (`frontend/src`)

- **Root**: `App.tsx` (Layout composition)
- **Context**: `AppContext.tsx` (Global state, Caching, Action Dispatch)
- **Services**: `MockApiService.ts` (Data Provider, Logic Simulation), `ApiService.ts` (Placeholder for real API)

## Components (`frontend/src/components`)

- `TopBar.tsx`: User Input, Search, Navigation
- `StatusBar.tsx`: Application status feedback
- `dashboard/`:
    - `EventMonitorCard.tsx`: Price Chart, Timeframe Slider (10-step granularity)
    - `MarketOverviewCard.tsx`: Metrics, Risk Assessment
    - `NewsTicker.tsx`: Dual-channel scrolling news
    - `EssayCard.tsx`: Markdown-rendered AI analysis
    - `SummarizerCard.tsx`: Executive textual summary

## Backend Service (`ai_service/`)

- **Framework**: FastAPI
- **Status**: Operational but disconnected from Frontend
- **Endpoints Observed**: `/resolve/ticker`, `/api/fundamentals`, `/api/price_history`, `/api/sector_news`, `/analyze/essay`, `/analyze/full_report`, `/api/quota`
- **Providers Configured**: Gemini, Groq (keys present in `.env`)
- **Mode**: `DEV_MODE` uses mock data

---

# 4. Data Flow Observation

Observed flow for "Stock Analysis":

1.  **Trigger**: User Input (TopBar)
2.  **Resolution**: `resolveStockInput` -> `MockApiService.searchStock` (Fuzzy Match)
3.  **State Update**: `selectedStock` / `selectedSector` updated in Context
4.  **Action**: `runAnalysis` triggered
5.  **Cache Check**: Context checks compound key (`ANALYSIS:TICKER:SECTOR:LANG`)
6.  **Service Call**: `MockApiService.runAnalysis` (if cache miss)
7.  **Result**: `AnalysisResult` returned (Report, News, Chart)
8.  **Render**: UI Components consume `analysisResult` via Context

**Conclusion**: Strictly follows Unidirectional Data Flow.

---

# 5. API Behavior (Mock)

Observed characteristics of `MockApiService.ts`:

- **Interface**: Async Promise-based (simulates Network)
- **Determinism**: High. Input `A` always results in output `B` (or specific fallback)
- **Resolution**:
    - Stock Alias: "Google" -> "ACME"
    - Language: "ger" -> "German"
- **Fallback**:
    - If specific stock data missing -> Generates generic "safe" report based on ticker/sector name.
    - **Note**: This prevents UI breakage but masks data absence.

> **Deviation from DESIGN.md**: Mock fallback generation masks missing data. DESIGN.md requires explicit distinction between real and generated data.

---

# 6. LLM Simulation Behavior

Observed in `MockApiService.ts`:

- **Implementation**: Static string templates with variable interpolation.
- **Language Support**: Hardcoded German/English templates.
- **Connection**: DISCONNECTED. No API calls to OpenAI/Gemini/Local LLM from Frontend.

Observed in `ai_service/main.py`:

- **Providers**: Gemini, Groq, OpenAI, OpenRouter configured
- **Status**: Ready but not invoked by Frontend

Compliance:
✔ Generated data is identifiable (via Mock Source)
✔ No silent overwrite of verified data (Mock data is authoritatively static)

---

# 7. Compliance with DESIGN.md

### Observed Compliance

| Rule | Status | Observation |
|------|--------|-------------|
| Component-based | ✔ | React components used exclusively |
| Unidirectional | ✔ | Context -> Component flow |
| No DOM manipulation | ✔ | React Virtual DOM used |
| Tailwind usage | ✔ | No CSS-in-JS or inline styles observed |
| Typed Interfaces | ✔ | `types.ts` strictly defined |
| No Real Backend | ✔ | Mock Service strictly isolated |
| JavaFX deprecated | ✔ | `gui/` removed, archived in `/Trash/` |

### Not Yet Implemented (Roadmap Items)

- **TanStack Query**: Not observed. `useEffect` / `useState` used for data fetching (Acceptable for Prototype).
- **Tauri IPC**: No `invoke` calls observed in UI components.
- **Persistent Cache**: Cache is volatile (RAM only).
- **Frontend-Backend Bridge**: `ApiService.ts` is a placeholder. Frontend does not call `ai_service`.

---

# 8. Risk Summary

| Area | Risk | Status |
|------|------|--------|
| **Data Integrity** | Mock Fallback Generation hides missing data | **Deviation** (Production blocker) |
| **State** | Cache lost on reload (F5) | Known Issue |
| **Backend** | Zero backend connectivity from Frontend | Design Intent (Prototype) |
| **Performance** | Client-side slicing of 4000+ data points | Monitor required high-load |
| **Legacy** | Archived in `/Trash/`, not deleted | Cleanup pending |

---

# 9. Architectural Readiness

**Ready for:**

- UX/UI Refinement
- User Acceptance Testing (Mock Data)
- Stakeholder Demos
- Architecture Validation (Component Separation)

**Not ready for:**

- Real Trading Decisions
- Live Data Connection
- LLM Token Consumption

---

# 10. Final Assessment

- **Internal consistency**: YES. The system logically adheres to its own mock constraints.
- **Extensibility**: YES. `MockApiService` can be swapped for `RealApiService` implementing the same Interface.
- **Production readiness**: NO. Requires backend integration.
- **Cleanup Status**: COMPLETE. Legacy components archived.

**Verdict:**

Stock News Pro is a **structurally sound, strictly governed High-Fidelity Prototype**. The project structure is now clean, with legacy components archived. It demonstrates the target UX and Architecture without incurring backend complexity or costs at this stage.

---

# DOCUMENT CLASSIFICATION

| Attribute | Value |
|---------|------|
| Type | Descriptive System Report |
| Authority | None |
| Binding Source | DESIGN.md |
| Regeneration | Allowed |
| Rule Creation | Forbidden |

---

# SYSTEM REPORT GOVERNANCE EFFECT

This System Report standard ensures:

## For LLM Systems

LLMs MUST:

- Follow this structure when generating System Reports.
- Never introduce normative rules.
- Always reference DESIGN.md as authority.

## For Automated Test Systems

Test systems MUST:
- Validate report structure.
- Reject normative statements.
- Detect DESIGN.md deviations.

## For Auditors

Auditors MUST:
- Treat this document as descriptive only.
- Use it for compliance comparison.

## For Human Maintainers

Humans MUST:
- Use this report to understand system reality.
- Never use it as design authority.

## For Governance

This document prevents:
- Rule dilution
- Architecture drift
- LLM hallucinated governance

---

END OF SYSTEM_REPORT_GEMINI_2026-01-21_V2.md
